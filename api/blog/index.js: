let blogPosts = [...]; // same data

 export default function (req, res) {
   res.setHeader('Access-Control-Allow-Origin', '*');
   res.setHeader('Access-Control-Allow-Methods', 'GET, POST');
   res.setHeader('Access-Control-Allow-Headers', 'Content-Type');

   if (req.method === 'OPTIONS') {
     res.status(200).end();
     return;
   }

   if (req.method === 'GET') {
     res.json(blogPosts);
   } else if (req.method === 'POST') {
     const { title, content } = req.body;
     if (!title || !content) {
       res.status(400).json({ error: 'Title and content are required' });
       return;
     }

     const newPost = {
       id: blogPosts.length + 1,
       title,
       date: new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }),
       readTime: `${Math.ceil(content.split(' ').length / 200)} min read`,
       content
     };

     blogPosts.push(newPost);
     res.status(201).json(newPost);
   } else {
     res.status(405).end();
   }
 }
